/**
 * jQuery Slidy - A Transition Plugin - http://wbotelhos.com/slidy
 * 
 * @author  Washington Botelho
 * @twitter wbotelhos
 * @version 0.2.0
 * 
 * Licensed under The MIT License
 * http://opensource.org/licenses/mit-license.php
 * 
 */

(function(b){b.fn.slidy=function(y){if(this.length==0){a("Selector invalid or missing!");return;}else{if(this.length>1){return this.each(function(){b.fn.slidy.apply(b(this),[y]);});}}var d=b.extend({},b.fn.slidy.defaults,y),i=b(this),r=this.attr("id"),q=i.children(d.children),j=q.length,m=(d.children=="img")?q:q.find("img"),n=0,h=false;if(r===undefined){r="slidy-"+i.index();i.attr("id",r);}i.data("options",d).css({cursor:d.cursor,height:d.height+"px",overflow:"hidden",position:"relative",width:d.width+"px"});q.each(function(B){b(this).css({position:"absolute","z-index":j-B}).attr("id",i.attr("id")+"-"+(B+1));});m.attr({height:d.height,width:d.width}).css("border","0");if(d.children=="a"&&d.target!=""){q.attr("target",d.target);}q.hide().first().show();if(d.menu){$menu=b("<ul/>",{id:r+"-slidy-menu","class":"slidy-menu"}).insertAfter(i);}var u=function(){clearTimeout(n);},g=function(){u();},w=function(D){u();var F=b(this),B=F.index(),C=F.parent().children(".slidy-link-selected"),E=C.index();if(B!=E){C.removeClass("slidy-link-selected");F.addClass("slidy-link-selected");l(E,B);}},v=function(B){t(b(B.target).parent("a").index());},e=function(){var E=b(this),B=E.index(),C=E.parent().children(".slidy-link-selected"),D=C.index();t(D);},s=function(D){u();var F=b(this),B=F.index(),C=F.parent().children(".slidy-link-selected"),E=C.index();if(B!=E){C.removeClass("slidy-link-selected");F.addClass("slidy-link-selected");}t(B);};if(d.menu){var z=(d.target!="")?'target="'+d.target+'"':"",c="",k,A;m.each(function(){A=b(this);k=A.parent(d.children);c+='<li><a href="'+k.attr(k.is("a")?"href":"title")+'" '+z+">"+A.attr("title")+"</a></li>";});$menu.html(c);var x=parseInt((d.width/j)+(j-1)),p=d.width-(x*j),f=$menu.children("li");if(d.action=="mouseenter"){f.mouseenter(w).mouseleave(e);}else{if(d.action=="click"){f.click(s);}else{a('action attribute must to be "click" or "mouseenter"!');return;}}f.css("width",x).first().addClass("slidy-link-selected").end().last().css({"border-right":"0",width:(x+p)-(j-1)});if(d.animation=="slide"||d.animation=="fade"){f.mousemove(function(){var B=b(this);if(!B.hasClass("slidy-link-selected")){B.mouseenter();}});}}t(0);if(d.pause){i.mouseenter(g).mouseleave(v);}function t(B){var D=j-1,C=null;if(B>D){B=0;C=D;}else{if(B<=0){B=0;C=D;}else{C=B-1;}}l(C,B);n=setTimeout(function(){t(++B);},d.time);}function l(C,B){if(!h){h=true;if(d.animation=="fade"){q.eq(C).fadeOut(d.speed).end().eq(B).fadeIn(d.speed,function(){o(B);h=false;});}else{if(d.animation=="slide"){q.css("z-index",0).eq(B).css("z-index",j).slideDown(d.speed,function(){q.eq(C).hide();o(B);h=false;});}else{q.eq(C).hide().end().eq(B).show(0,function(){o(B);h=false;});}}}}function o(B){if(d.menu){i.next("ul.slidy-menu").children().removeClass("slidy-link-selected").eq(B).addClass("slidy-link-selected");}}return i;};function a(c){if(window.console&&window.console.log){window.console.log(c);}}b.fn.slidy.defaults={action:"mouseenter",animation:"normal",children:"img",cursor:"default",height:200,menu:false,pause:false,speed:600,target:"",time:3600,width:500};})(jQuery);